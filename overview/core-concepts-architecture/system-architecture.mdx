---
title: "System Architecture and Data Flow"
description: "Illustrates the high-level architecture of uBO Scope, summarizing component roles: background script for network analysis and session management; popup UI for report presentation; public suffix usage for accurate domain reporting. Provides a mermaid diagram to visually map data flow from browser network events to user interface."
---

# System Architecture and Data Flow

uBO Scope is designed as a lightweight browser extension that provides comprehensive visibility into all remote server connections triggered by webpages. Understanding its architecture clarifies how network data is captured, processed, and presented to you in a meaningful way.

---

## Overview of Core Components

The architecture of uBO Scope is centered around three primary components, each playing a distinct role in delivering you accurate and timely connection insights:

### 1. Background Script
- **Function:** Acts as the engine of uBO Scope by continuously monitoring network requests via WebExtensions `webRequest` APIs.
- **Responsibilities:**
  - Listens for all web requests initiated by browser tabs.
  - Classifies each request’s outcome as allowed, stealth-blocked, or blocked.
  - Aggregates these outcomes at the domain and hostname level for each tab.
  - Maintains session data and updates the toolbar badge to reflect real-time connection counts.

### 2. Popup UI
- **Function:** The user-facing interface that displays detailed reports for the currently active browser tab.
- **Responsibilities:**
  - Retrieves processed connection data from the background script upon popup activation.
  - Presents categorized lists of remote server domains and their connection counts.
  - Converts domain names into human-readable Unicode format for clarity using Punycode decoding.
  - Dynamically updates the UI to fit various viewport sizes and ensures readability.

### 3. Public Suffix List (PSL) Integration
- **Function:** Employs the official Public Suffix List to accurately determine the registrable domain for any hostname.
- **Responsibilities:**
  - Distinguishes between subdomains, domains, and public suffixes.
  - Enables precise grouping of network requests by domain rather than just hostname for more relevant reporting.
  - Ensures the aggregation logic in the background script correctly reflects real organizational domains.

---

## Data Flow Explained

The following sequence outlines the step-by-step flow of network connection information from the moment a webpage initiates a request to when it is shown in the popup UI.

1. **Network Request Initiation:**
   When you browse a page, the browser triggers HTTP/S or WebSocket requests for resources.

2. **WebRequest API Event Capture:**
   uBO Scope's background script listens to events such as request redirects, errors, and response starts across all tabs.

3. **Request Classification:**
   Each request is tagged as one of:
   - **Allowed:** The connection succeeded and was permitted.
   - **Stealth-blocked:** Requests prevented silently by content blockers.
   - **Blocked:** Requests outright blocked (resulting in errors).

4. **Domain Extraction and Mapping:**
   Using the PSL, the hostname of the request is mapped to its base domain, ensuring requests from subdomains are grouped correctly.

5. **Aggregation of Outcomes:**
   The background script updates the respective category maps with counts for domains and hostnames on a per-tab basis.

6. **Badge Update:**
   The browser toolbar icon badge is updated to reflect the total number of distinct third-party domains with allowed connections for the active tab, helping you grasp overall exposure at a glance.

7. **Popup UI Data Fetch:**
   When you click the uBO Scope icon, the popup sends a message to the background script requesting the current tab’s aggregated data.

8. **Data Rendering:**
   The popup receives serialized tab data, deserializes it, then renders lists segregated by allowed, stealth-blocked, and blocked outcomes, displaying counts and Unicode domain names.

---

## Visualizing the Architecture

```mermaid
flowchart TD
  subgraph Browser Environment
    Tab["Active Browser Tab"]
    Tab -->|Initiates Network Requests| Network
  end

  subgraph Network
    Network["HTTP/WebSocket Requests"]
  end

  subgraph uBO Scope Background
    WR["webRequest Listeners"]
    PS["Public Suffix List Parser"]
    DataStore["Session Data Store"]
    Badge["Toolbar Badge Update"]
  end

  subgraph uBO Scope Popup UI
    Popup["Popup UI Panel"]
    Renderer["Data Renderer & Punycode Decoder"]
  end

  Network --> WR
  WR --> PS
  PS --> DataStore
  DataStore --> Badge

  Popup -->|Message: request tab data| DataStore
  DataStore -->|Send serialized data| Popup
  Popup --> Renderer

  classDef component fill:#f9f9f9,stroke:#333,stroke-width:1px,color:#111,font-weight:bold;
  class Browser Environment,Network,uBO Scope Background,uBO Scope Popup UI component;

  class WR,PS,DataStore,Badge,Popup,Renderer component;
```

---

## Practical Implications for Users

- **Transparency:** You see exactly which domains your browser connects to, including those silently blocked or allowed.
- **Accuracy:** The use of the PSL guarantees domain counts represent actual organizational domains.
- **Performance:** Background processing and session management ensure real-time updates without slowing browsing.
- **Clarity:** Unicode conversion and categorized connection lists enhance your understanding of network activity.

---

## Tips & Best Practices

- The badge count reflects only **third-party allowed domains**, so a lower number generally indicates fewer external connections.
- To see details, open the popup from the toolbar icon, which presents a categorized breakdown.
- If you notice unexpected high counts, consider auditing your extensions and network activity.
- The extension’s reliance on the `webRequest` API means some invisible or system-level requests may not be reported.

---

For deeper understanding, see the [Network Visibility Model documentation](/overview/core-concepts-architecture/network-visibility-model) and [Key Terms and Definitions](/overview/core-concepts-architecture/key-terms-and-definitions), which explain the concepts behind request classification and domain analysis.

Also review the [What is uBO Scope?](/overview/product-intro/what-is-ubo-scope) for context on why the architecture is designed this way, and [Quick Tour: The Popup UI](/overview/feature-overview/popup-ui-quicklook) to understand the user interface in detail.

---

By grasping this architecture, you empower yourself to make informed decisions on privacy and network security, leveraging uBO Scope’s full potential.
