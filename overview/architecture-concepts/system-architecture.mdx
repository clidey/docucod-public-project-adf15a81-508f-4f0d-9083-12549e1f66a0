---
title: "System Architecture Overview"
description: "Illustrates how uBO Scope integrates with the browser’s webRequest API, collects and analyzes data, and displays results in the popup UI. A mermaid diagram visually shows the data flow from browser requests to user insights."
---

# System Architecture Overview

## Understanding How uBO Scope Works Behind the Scenes

uBO Scope is designed to give you transparent, real-time insight into every network connection your browser initiates. This page unlocks the inner workings of how uBO Scope integrates tightly with the browser's network events to collect, analyze, and display detailed connection data within its user interface.

---

### What This Page Covers
- How uBO Scope leverages the browser's `webRequest` API to monitor network activity.
- The data flow from raw browser requests through internal processing to the popup UI display.
- A detailed Mermaid.js diagram visualizing the core components and their interactions.

---

## How uBO Scope Integrates with the Browser

At its core, uBO Scope listens to the browser’s `webRequest` API events. This API notifies the extension whenever a network request is made, redirected, completed, or blocked. By capturing these events, uBO Scope tracks the full lifecycle of each connection attempt from web pages.

The extension’s background script serves as the central hub:

- It receives webRequest events, classifies outcomes such as ‘allowed,’ ‘blocked,’ or ‘stealth-blocked.’
- It maintains session-specific data mapping each browser tab to connection details.
- It records domain and hostname information with precise counters.

This integration ensures uBO Scope captures every remote connection attempt—even those blocked invisibly or stealthily—offering a truthful, comprehensive picture of your browser’s network behavior.

---

## Data Collection and Analysis Flow

1. **Network Event Capture:**
   - The background script listens to three key webRequest events:
     - `onResponseStarted` (request succeeded),
     - `onErrorOccurred` (request failed),
     - `onBeforeRedirect` (request redirected).

2. **Request Processing:**
   - Events queued to minimize processing overhead.
   - Each request’s URL is parsed to extract hostname and domain.
   - Requests are categorized by outcome: allowed, stealth, or blocked.

3. **Tab Data Aggregation:**
   - A map stores details per tab, including distinct domain counts.
   - Counters update dynamically, reflecting ongoing network activity.

4. **User Interface Rendering:**
   - When you open the uBO Scope popup, a message fetches the aggregated tab data.
   - The popup UI then displays categorized connection lists and counts, making it easy to interpret your browsing’s remote server connections.

---

## Visualizing the System Architecture

Below is a Mermaid.js flowchart depicting how uBO Scope components and browser APIs interact to deliver its functionality:

```mermaid
flowchart TD

  subgraph Browser
    WebRequestAPI["webRequest API"]
    PopupUI["Popup UI"]
    Tabs["Browser Tabs"]
  end

  subgraph uBO_Scope
    Background["Background Script"]
    SessionData["Session Data Storage"]
    DomainParser["Domain & Hostname Parser"]
  end

  WebRequestAPI -->|Network Events (success, error, redirect)| Background
  Background -->|Parse URL| DomainParser
  DomainParser --> Background
  Background -->|Update tab data| SessionData
  Tabs -->|User opens popup| PopupUI
  PopupUI -->|Request tab data| Background
  Background -->|Send serialized data| PopupUI

  classDef component fill:#e3f2fd,stroke:#0d47a1,stroke-width:1px;
  class Browser component;
  class uBO_Scope component;

```

This diagram highlights the clear interaction points:

- The **Browser's webRequest API** feeds raw network event data.
- The **Background Script** serves as the engine, processing and storing data.
- The **Domain Parser** module extracts meaningful domain details.
- The **Session Data Storage** holds tab-specific aggregation.
- The **Popup UI** queries the background to present up-to-date insights.

---

## Practical Example: From Network Request to User Insight

Imagine you navigate to a website:

- Your browser initiates dozens of requests to various servers.
- For each request, the `webRequest` API notifies uBO Scope’s background script.
- The script records whether the connection was allowed, blocked, or stealthily blocked.
- Domains are extracted and stored with counts for the active tab.
- When you click the uBO Scope icon, the popup fetches this categorized data.
- The UI displays each category with the number of distinct domains connected.

This seamless flow allows you to verify exactly which remote servers your browser contacted, despite any content blockers or network filters.

---

## Best Practices & Tips

- **Keep the browser updated:** uBO Scope relies on the browser's webRequest API. Ensure your browser supports all necessary permissions and APIs.
- **Interpret badge counts correctly:** The toolbar badge reflects the count of distinct allowed remote servers per tab — a key privacy indicator.
- **Understand categories:**
  - *Allowed*: Connections successfully established.
  - *Stealth-blocked*: Connections blocked silently by content blockers to avoid page breakage.
  - *Blocked*: Connections prevented explicitly.
- **Session persistence:** Data persists per browser session but resets when tabs are closed, helping you focus on current browsing data.

---

## Troubleshooting Common Issues

<AccordionGroup title="Troubleshooting Network Data Collection">
<Accordion title="No Data or Empty Popup View">
Ensure the browser grants `webRequest` and `storage` permissions correctly. Lack of permissions or a browser that restricts background scripts may prevent data collection.
</Accordion>
<Accordion title="Badge Count Does Not Update">
The badge updates after batches of network events are processed asynchronously. Reloading tabs or waiting a few seconds ensures data consistency.
</Accordion>
<Accordion title="Unexpected Domains in Results">
Domains might resolve differently due to redirects or DNS configurations. Cross-verify with external tools if needed.
</Accordion>
</AccordionGroup>

---

## Next Steps

To deepen your understanding and start using the extension:

- Visit [What is uBO Scope?](../product-intro-value/what-is-ubo-scope) to grasp core product goals.
- Explore [Key Value & Benefits](../product-intro-value/value-proposition) for user scenarios and advantages.
- Consult [Interpreting the Badge and Popup](../../getting-started/getting-value-quickstart/interpreting-badge-popup) to learn how to read the UI.

---

## Additional Resources

- GitHub Repository: [uBO-Scope on GitHub](https://github.com/gorhill/uBO-Scope)
- Browser Extensions Documentation: Refer to your browser’s developer docs for `webRequest` API details

---

This architecture overview bridges the gap between user-facing insights and the underlying mechanics that empower uBO Scope’s transparency and effectiveness.