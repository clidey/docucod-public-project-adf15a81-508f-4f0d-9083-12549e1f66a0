---
title: "How uBO Scope Works"
description: "Gain an overview of the extension’s architecture: from background network monitoring via browser APIs, to real-time badge updates, to in-depth per-tab analysis. Includes a clear Mermaid diagram mapping out main components and data flows between network requests, tab session storage, and the popup UI."
---

# How uBO Scope Works

Discover how uBO Scope operates behind the scenes to provide you with real-time, accurate visibility into your browser’s third-party network connections. This page unveils the extension's architecture—from monitoring network requests at the browser level to updating the toolbar badge and presenting in-depth per-tab analysis in the popup UI.

---

## Overview

When you browse the web, countless network requests happen silently in the background. Some succeed, some get blocked, and others are redirected or stealthy. uBO Scope unlocks this hidden world by tapping into your browser’s webRequest API to monitor these network activities continuously.

Its architecture ensures that every network request triggered by a webpage is examined and categorized into meaningful outcomes without interfering with your browsing experience.

This insight empowers you to distinguish between allowed, blocked, and stealth-blocked third-party connections with precise, per-tab granularity.

---

## Core Workflow and Architecture

At the heart of uBO Scope is a coordinated system that works continuously:

- **Network Monitoring:** The extension registers listeners for network events (redirects, errors, success) directly from the browser’s `webRequest` API.
- **Session Storage:** Per-tab connection details are collected and maintained in session storage, ensuring data persistence during your browsing session.
- **Badge Updates:** The extension dynamically updates the toolbar badge to reflect the count of distinct allowed third-party domains per active tab.
- **Popup UI:** On demand, detailed connection data per tab is retrieved from the session and visualized in a user-friendly popup interface, showing allowed, blocked, and stealth-blocked domains.

By dividing responsibilities efficiently between background monitoring and UI visualization, uBO Scope ensures timely and accurate reporting without performance penalties.

---

## Detailed Components & Data Flow

### 1. Background Process (Network Listener)

The background service worker is the core engine tracking your browser’s network traffic:

- Registers listeners for these events:
  - `onBeforeRedirect` — Captures redirects.
  - `onErrorOccurred` — Detects failures and blocks.
  - `onResponseStarted` — Identifies successful network responses.
- Captures details on each network request, such as its URL, type, and outcome.
- Uses the Public Suffix List and Punycode library to accurately extract domain and hostname info from URLs.
- Maintains an in-memory map associating each browser tab with its network request details.
- Batches request events and processes them every second to efficiently update data.
- Updates the toolbar badge count to the number of distinct allowed third-party domains for each tab.
- Ensures session data is serialized and persisted to session storage, enabling continuity across tab reloads.

### 2. Session Storage

The session storage acts as the transient but reliable store holding per-tab connection summaries:

- Stores collections of domains and hostnames categorized as **allowed**, **blocked**, or **stealth-blocked**.
- Captures counts of connection attempts per domain and hostname.
- Provides data serialization and deserialization to optimize storage and retrieval.

### 3. Popup User Interface (Per-Tab Data Retrieval)

When you open the extension popup for a tab:

- A message is sent to the background process requesting the current tab’s connection data.
- The background deserializes the stored data and sends it back.
- The popup script renders comprehensive lists categorized by outcome (allowed, blocked, stealth-blocked), showing domain names and connection counts.
- Uses Punycode decoding to present internationalized domain names in readable Unicode.

---

## Mermaid Diagram: Architecture & Data Flow

```mermaid
flowchart TD

  subgraph Browser Environment
    WebRequestAPI["Browser WebRequest API"]
    Tabs["Browser Tabs"]
  end

  subgraph Background Service Worker
    NetworkListener["Network Request Listener"]
    SessionStorage["Session Storage (Per-Tab Data)"]
    BadgeUpdater["Toolbar Badge Updater"]
    MessageHandler["Message Handler"]
    PSL["Public Suffix List & Punycode"]
  end

  subgraph Popup UI
    PopupRequest["Popup Data Request"]
    PopupRenderer["Popup Data Renderer"]
  end

  WebRequestAPI -->|Captures events (redirect, error, success)| NetworkListener
  NetworkListener -->|Extracts host/domain info| PSL
  NetworkListener -->|Updates per-tab connection data| SessionStorage
  NetworkListener -->|Triggers| BadgeUpdater
  Tabs -->|Tab closed / updated| NetworkListener
  PopupRequest -->|Request tab data| MessageHandler
  MessageHandler -->|Fetches from| SessionStorage
  MessageHandler --> PopupRenderer

  classDef component fill:#f9f,stroke:#333,stroke-width:1px;
  class NetworkListener,SessionStorage,BadgeUpdater,MessageHandler,PopupRenderer,PopupRequest,PSL component;
```

---

## Step-by-Step: How Network Requests Are Processed

1. **Network Event Interception:**
   - When a network request occurs, the listener receives details such as the URL and request type.

2. **Data Extraction:**
   - The URL is parsed to extract hostname and top-level domain using the Public Suffix List and Punycode decoding.

3. **Tab Association:**
   - The request is attributed to the corresponding browser tab.

4. **Outcome Classification:**
   - Requests are categorized as **allowed** (successful), **blocked**, or **stealth-blocked** (redirected maliciously or silently blocked).

5. **Data Update:**
   - Tab-specific connection details are updated in session storage.
   - Domain and hostname counts increase accordingly.

6. **Badge Refresh:**
   - The toolbar badge shows the number of unique allowed domains.

7. **Popup Data Delivery:**
   - Upon user request, serialized data is fetched and presented in the popup UI for user inspection.

---

## Practical Tips & Best Practices

- **Understanding the Badge:** The badge number is not a block count but the number of distinct, allowed third-party domains on the active tab.
- **Keep Browsing Efficient:** uBO Scope minimizes performance impact by batching request processing.
- **Real-Time Data:** While network requests are processed in real-time, minor delays (up to 1 second) are normal due to batching.
- **Session Persistence:** Closing tabs clears stored data for them, maintaining an accurate, lean data set.
- **Popup Responsiveness:** Opening the popup quickly provides a snapshot of the network landscape per tab.

---

## Troubleshooting Common Scenarios

- **No Badge Displayed:** Could indicate no allowed third-party connections or that the tab’s data is not yet processed.
- **Popup Shows "NO DATA":** This means network data for the active tab is not available, possibly due to browser restrictions or no network activity yet.
- **Delayed Badge Update:** Network event batching intentionally delays updates by approximately one second for efficiency; patience ensures accuracy.

---

## Next Steps

To deepen your understanding and maximize the value of uBO Scope:
- Explore [Understanding Toolbar Badge Counts](/guides/core-workflows/understanding-badge-counts) to interpret badge numbers effectively.
- Learn how to analyze detailed third-party connections on a per-tab basis in [Analyzing Third-Party Connections](/guides/core-workflows/analyzing-connections).
- Review the general purpose of uBO Scope in [What is uBO Scope?](/overview/intro-core-value/product-purpose) for broader context.

---