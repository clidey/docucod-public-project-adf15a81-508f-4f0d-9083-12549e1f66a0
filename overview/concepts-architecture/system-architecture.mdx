---
title: "How uBO Scope Works: Architecture Overview"
description: "Explore a high-level diagram and narrative explaining how browser network requests are intercepted, processed, and presented to the user. See how background scripts, the popup UI, and WebExtension APIs interact, and understand the flow from data collection to user insights."
---

# How uBO Scope Works: Architecture Overview

## Understanding the Flow of Network Request Monitoring

uBO Scope offers you a transparent view into how your browser handles network requests. This page provides a high-level narrative and graphical explanation of the core architecture, showing how network activity is intercepted, processed, and ultimately presented to you, the user. By following this architectural overview, you will grasp how data flows from raw browser network events through internal processing layers and finally into the user interface you interact with.

---

## Architecture Overview: What Happens Behind the Scenes?

At its core, uBO Scope acts as a vigilant observer of your browser's network activity. It leverages browser WebExtension APIs — specifically, the `webRequest` API — to listen for all outgoing network requests triggered by webpages you visit.

### Key Components:

- **Background Script (Service Worker / Module)**
  - Runs independently of any page or UI
  - Intercepts and records network request data as events occur
  - Processes outcomes such as allowed, blocked, or stealth-blocked requests
  - Maintains session state per browser tab, aggregating details of domains contacted

- **Popup UI (Popup Window)**
  - Triggered when you click the extension icon
  - Requests and receives processed data for the active tab from the background script
  - Presents concise summaries and detailed domain lists categorized by request outcome

- **WebExtension APIs**
  - Provide the glue to intercept network requests and to implement messaging between background and popup
  - Manage persistent and session storage to save state across browsing sessions

This architecture ensures that data collection occurs continuously and efficiently in the background, while your experience remains responsive and clear in the popup interface.

---

## High-Level Workflow

1. **Network Request Occurs:** When your browser initiates a network request (e.g., loading an image, script, or frame), uBO Scope’s background script intercepts this event via the `webRequest` listener.

2. **Event Categorization:** Each request is classified based on its result:
   - **Allowed:** Successfully connected requests
   - **Blocked:** Requests prevented by content blockers or network errors
   - **Stealth-Blocked:** Redirected or stealthy blocks that may avoid detection

3. **Data Aggregation:** The background script updates an internal, session-based map keyed by tab ID, keeping track of unique domains contacted and their outcomes.

4. **Badge Update:** The browser extension icon badge updates to reflect the count of distinct allowed third-party domains for the active tab.

5. **Popup Interaction:** When you open the popup UI:
   - It sends a message to the background script requesting current tab data
   - Receives serialized tab details including domain counts by outcome
   - Renders this data in a clean, categorized format for quick insights

---

## Detailed Component Interaction

```mermaid
flowchart TD

    subgraph Web Browser
      direction TB
      User["User clicks extension icon"]
      PopupUI["Popup UI\n(popup.html + popup.js)"]
      BackgroundScript["Background Script\n(service worker/module)"]
    end

    subgraph BrowserNetwork
      direction TB
      WebRequestAPI["webRequest API\n(intercepts network requests)"]
      NetworkRequests["Network Requests\n(main frame, subresources)"]
    end

    User -->|opens popup| PopupUI

    NetworkRequests -->|captured request details| WebRequestAPI
    WebRequestAPI -->|events (onBeforeRedirect, onErrorOccurred, onResponseStarted)| BackgroundScript

    PopupUI -->|sendMessage: getTabData| BackgroundScript
    BackgroundScript -->|response: serialized tab data| PopupUI

    BackgroundScript -->|updates badge count| BrowserAction["Browser Action Badge"]

    %% Styling and grouping for clarity
    classDef component fill:#f0f8ff,stroke:#333,stroke-width:1px;
    class WebRequestAPI,BackgroundScript,PopupUI,BrowserAction component;
```

---

## Practical Example: From Network Request to User Insight

Imagine you navigate to a news website with multiple embedded services:

- The background script listens as the browser attempts requests to various domains (news site main domain, CDNs, ad servers).
- Some requests successfully load (allowed), some are silently redirected or blocked by your content blocker (stealth or blocked).
- The extension collects and updates data about these connections, associating them with the specific browser tab.
- Your toolbar badge reflects how many unique third-party servers the tab connected to.
- Opening the popup UI breaks down the domains contacted by category, making it easy to see the network footprint of the page.

This immediate feedback empowers you to audit and understand your browsing privacy footprint.

---

## Tips for Using This Knowledge

- **Interpreting Badge Counts:** The number displayed indicates distinct third-party domains allowed connections. Fewer is generally better for privacy.
- **Popup Insights:** Use the popup to verify which domains were blocked or stealth-blocked versus allowed.
- **Session Continuity:** Data persists per browsing session and is maintained even when you switch tabs or reload pages.
- **Browser Compatibility:** Core components use standard WebExtension APIs available in Chromium, Firefox, and Safari, adapted as per manifest configurations.

---

## Troubleshooting Common Questions

<AccordionGroup title="Troubleshooting Architecture Insights">
<Accordion title="Why Don’t I See Data for a Tab in the Popup?">
It's possible the background script hasn't finished processing network events for the active tab yet. Wait a moment and refresh the popup.
</Accordion>
<Accordion title="What If the Badge Count Is Missing or Incorrect?">
Ensure your browser allows WebExtension APIs common to uBO Scope, especially 'webRequest' permissions. Some browsers restrict access, impacting data collection.
</Accordion>
<Accordion title="Does uBO Scope Block Requests?">
No, uBO Scope only reports connection attempts and outcomes; it does not block or modify requests itself.
</Accordion>
</AccordionGroup>

---

## Next Steps

Now that you understand the architecture, you are equipped to interpret the extension’s behavior and data presentation. For practical guidance, explore:

- [What is uBO Scope?](../introduction-and-value/product-purpose) to revisit the extension's goals
- [Who Should Use uBO Scope?](../introduction-and-value/target-audience-use-cases) to see if it fits your needs
- [Core Features at a Glance](../introduction-and-value/feature-highlights) to learn about capabilities

Dive deeper and get hands-on with monitoring your browser’s network activity effectively.

---

## Source Code References

- **Popup UI:** `popup.html` and `js/popup.js` handle user interaction and data rendering.
- **Background Processing:** `js/background.js` manages event collection and tab data.
- **Extension API Wrapper:** `js/ext.js` smoothens cross-browser API usage.

For an insider’s look at components, visit the [GitHub repository](https://github.com/gorhill/uBO-Scope).

---

*This page demystifies the core of uBO Scope, allowing you to understand the journey from network request interception to meaningful user insights.*